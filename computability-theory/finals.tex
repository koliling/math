\documentclass{article}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}
\usepackage{amsmath,amssymb,amsthm,tikz,mathtools}
\usepackage{stmaryrd} % For double square bracket [[]]
\usepackage{bm} % For bold vectors
\usepackage{color}
\usepackage{cancel} % To use the cancel function
\usepackage[inline]{enumitem}
\usetikzlibrary{patterns}
\setlength{\parindent}{0mm}
\newcommand{\TODO}[1]{\textcolor{red}{TODO: #1}}

\begin{document}
\title{Basic Logic II: Finals}
\author{Li Ling Ko\\ lko@nd.edu}
\date{\today}
\maketitle

\textbf{Kunen I.9.6:} \it Derive the axioms of Infinity and Replacement
  from (2) of Lemma I.9.5. Hint. For Infinity, let $A$ be the
  (possibly proper) class of all natural numbers, and let $xRy$ iff
  $x=y+1$.

  \begin{proof}
    We follow the hint to derive Infinity. Let $A$ be the
    possibly proper class of all natural numbers, and let $xRy$ iff
    $x=y+1$. Formally, $A$ is the class of sets $n$ where $n$
    is transitive, well-ordered by $\in$, and contains only elements that
    are either the empty set or a successor. Also, relation $xRy$ is
    defined by $x=S(y)$, where $S$ denotes the formula for successor. Then
    $R$ is set-like on $A$, because every natural number $n$ has only one
    successor $S(n)$ which is also a natural number. Therefore
    $\text{pred}_{A,R}(n) =\{S(n)\}$, which is a set since $S(n)$ is a set
    and singletons of sets are sets by the Pairing Axiom. Thus from Lemma
    I.9.5 the transitive closure relation $R^*$ is also set-like. \\

    Consider the transitive closure $B$ of $\emptyset$ in $A$. $B$ is a set
    since $R^*$ is set-like. Also, $B$ will contain exactly all the natural
    numbers, and is therefore a witness for the Axiom of Infinity. \\

    To derive Replacement, fix any set $X$ and formula $\varphi(x,y,w)$
    such that for a fixed set $w$, given any $x\in X$ there is a unique set
    $y$ such that $\varphi(x,y,w)$ holds. We want to show that the range of
    $\varphi$, defined as $Y :=\{y: (\exists x\in X)\; \varphi(x,y,w)\}$,
    is a set. We define a relation $R$ on the possibly proper class $X\cup
    Y$ such that if $y\in Y$, then $xRy$ iff $x\in X$ and
    $\neg\varphi(x,y,w)$. Otherwise if $x\in X$, then $yRx$ iff
    $\varphi(x,y,w)$. \\

    Now $R$ is set-like on $X\cup Y$, because if $y\in Y$, then
    $\text{pred}_{X\cup Y,R}(y) =\{x\in X: \neg\varphi(x,y,w)\}$, which is
    a set by the axiom of Comprehension since it is a subset of $X$ and can
    be defined by the formula $\neg\varphi(x,y,w)$. Also, if $x\in X$,
    then $\text{pred}_{X\cup Y,R}(x)=\{y\}$, where $y$ is the unique set
    that $\varphi(x,y,w)$ holds; this will also be a set by the Pairing
    axiom since $y$ is a set. Thus by Lemma I.9.5, the transitive closure
    relation $R^*$ is also set-like. \\

    Fix any $x\in X$, and consider its transitive closure
    $S=\text{pred}_{X\cup Y,R^*}(x)$. Then $S$ is a set from Lemma I.9.5,
    and $S$ is exactly $X\cup Y$ by definition. Then using Comprehension,
    we can extract $Y$ as a set from $S$ as follows:
    \[Y =\{y\in S:\; (\exists x)\; \varphi(x,y,w)\}.\]
  \end{proof}

\textbf{Kunen I.9.24:} \it Suppose that $x,y\in\text{WF}$. Then:
  \begin{enumerate}
    \item \it $\{x,y\}\in\text{WF}$ and $\text{rank}(\{x,y\})
      =\max(\text{rank}(x), \text{rank}(y))+1$.

      \begin{proof}
        The first assertion follows from I.9.24.3 which says a set lies in
        WF iff all its elements lie in WF. The second assertion follows
        from I.9.24.4.
      \end{proof}

    \item \it $\langle x,y\rangle\in\text{WF}$ and $\text{rank}(\langle
      x,y\rangle) =\max(\text{rank}(x), \text{rank}(y))+2$.

      \begin{proof}
        The first assertion follows from I.9.24.3 and the fact that both
        $\{x\}$ and $\{x,y\}$ lie in WF from part (1) of this question.
        The second assertion follows from I.9.24.4 and the fact that
        $\text{rank}(\{x,y\}) =\max(\text{rank}(x), \text{rank}(y))+1$ as
        shown in the first part of this question.
      \end{proof}

    \item \it If $\mathcal{P}(x)$ exists, then $\mathcal{P}(x)\in\text{WF}$
      and $\text{rank}(\mathcal{P}(x)) =\text{rank}(x)+1$.

      \begin{proof}
        $x$ lies in WF, so each of its members must also lie in WF from
        Lemma I.9.24.1. Then any subset of the $x$ also lies in WF from
        Lemma I.9.24.3, therefore $\mathcal{P}(x)$ also lies in WF from the
        same lemma. Since $x$ lies in $\mathcal{P}(x)$, the rank of
        $\mathcal{P}(x)$ is at least $\text{rank}(x)+1$ from Lemma
        I.9.24.4. Also from the same lemma, the rank of any subset of $x$
        cannot exceed the rank of $x$. Therefore the rank of
        $\mathcal{P}(x)$ cannot exceed $\text{rank}(x)+1$, and must equal
        $\text{rank}(x)+1$.
      \end{proof}

    \item \it $\bigcup x\in\text{WF}$ and $\text{rank}(\bigcup x)
      \leq\text{rank}(x)$.

      \begin{proof}
        The members of $\bigcup x$ are the members of members of $x$. Since
        each member of $x$ is in WF from Lemma I.9.24.1, the members of
        members of $x$ also lie in WF from the same lemma. Then from Lemma
        I.9.24.3, $\bigcup x$ lies in WF. For the second assertion in the
        question, assume by contradiction that $\text{rank}(\bigcup
        x)>\text{rank}(x)$. Then from Lemma I.9.24.4, there must be a
        member $y$ of $\bigcup x$ whose rank is at least the rank of $x$. But
        then $y$ is a member $z$ of a member of $x$, so the rank of $z$ is
        at least $\text{rank}(x)+1$ from Lemma I.9.24.4, and then from the
        same lemma the rank of $x$ is at least $\text{rank}(x)+2$, a
        contradiction.
      \end{proof}

    \item \it $x\cup y\in\text{WF}$ and $\text{rank}(x\cup y)
      =\max(\text{rank}(x), \text{rank}(y))$.

      \begin{proof}
        Each member of $x$ or of $y$ lie in WF from Lemma I.9.24.1,
        therefore $x\cup y$ lies in WF from Lemma I.9.24.3. Then from Lemma
        I.9.24.4, the rank of $x\cup y$ is at least the rank of $x$ and of
        $y$ since $x\cup y$ is a superset of $x$ and $y$. Also, the rank
        cannot exceed the rank of $x$ or the rank of $y$, because each
        element of $x\cup y$ is contained in either $x$ or $y$. Therefore
        $\text{rank}(x\cup y) =\max(\text{rank}(x), \text{rank}(y))$.
      \end{proof}

    \item \it $\text{trcl}(x)\in\text{WF}$ and $\text{rank}(\text{trcl}(x))
      =\text{rank}(x)$.

      \begin{proof}
        We prove by transfinite induction on the rank of $x$. If $x$ has
        rank 0, then from Lemma I.9.24.4 $x$ must be $\emptyset$, and the
        assertion holds trivially. \\

        For induction on successor ordinals, let $x\in\text{WF}$ with rank
        $\alpha+1$ for some ordinal
        $\alpha$. Then from Lemma I.9.24.4, all members of $x$ have rank
        less than or equal $\alpha$, and there must be at least one member
        $y$ of $x$ that has rank $\alpha$. Now
        \begin{equation}
          \text{trcl}(x) =x\cup\bigcup_{y\in x} \text{trcl}(y).
          \label{eqn:trcl}
        \end{equation}
        For each $y\in x$,
        since $\text{rank}(y)\leq\alpha$, by induction hypothesis
        $\text{trcl}(y)$ lies in WF and has rank equal to the rank of $y$.
        Also each $y\in x$ lies in WF from Lemma I.9.24.1. Therefore
        from equation~\eqref{eqn:trcl} and Lemma I.9.24.1, all elements of
        $\text{trcl}(x)$ lie in WF, so by Lemma I.9.24.3 $\text{trcl}(x)$
        also lies in WF. Furthermore, since
        $\text{rank}(\text{trcl}(y)) \leq\alpha$ for each $y\in x$, and
        there exists a member of $x$ whose rank is $\alpha$, therefore from
        from Lemma I.9.24.4 and equation~\eqref{eqn:trcl}, $\text{trcl}(x)$
        has rank $\alpha+1=\text{rank}(x)$. \\

        For induction on limit ordinals, let $x\in\text{WF}$ with rank
        $\gamma$ where $\gamma$ is a limit ordinal. Then from Lemma
        I.9.24.4, all members of $x$ have rank smaller than $\gamma$, and
        for every ordinal $\alpha$ less than $\gamma$, there must exist a
        member in $x$ with rank equal to $\alpha$. For each
        $y\in x$, since $\text{rank}(y)\leq\gamma$, by induction
        hypothesis $\text{trcl}(y)$ lies in WF and has rank less than
        $\gamma$. Also each $y\in x$ lies in WF from Lemma I.9.24.1.
        Therefore from equation~\eqref{eqn:trcl} and Lemma I.9.24.1, all
        elements of $\text{trcl}(x)$ lie in WF, so by Lemma I.9.24.3
        $\text{trcl}(x)$ also lies in WF. Furthermore, since
        $\text{rank}(\text{trcl}(y)) \leq\gamma$ for each $y\in x$, and for
        every ordinal less than $\gamma$
        there exists a member of $x$ whose rank equals that ordinal,
        therefore from from Lemma I.9.24.4 and equation~\eqref{eqn:trcl},
        $\text{trcl}(x)$ has rank $\sup\{\alpha+1: \alpha<\gamma\}
        =\gamma=\text{rank}(x)$. \\
      \end{proof}
  \end{enumerate}

\textbf{Kunen I.9.50:} \it Assume that $R$ is set-like on $A$ and not
  well-founded. Define a $G(x,s)$ that is an explicit counter-example to
  Theorem I.9.11.

  \begin{proof}
    Assume our universe $V$ contains two distinct sets $a$ and $b$ which
    contain each other, i.e. $a=\{b\}$ and $b=\{a\}$. Let $R$ be the usual
    containment relation $\in$, and let $A=\{a,b\}$. Then $\in$ is clearly
    set-like since for any set $x$, $\text{pred}(x)$ is $x$ itself. However
    $\in$ is not well-founded on $A$ since there is no $\in$-minimal
    element in that set. \\

    We define $G(x,s)$ such that if the associated recursive function
    $F(x)$ exists, then $F(x)$ returns the set of $\in^*$-minimal elements
    of the input set $x$. To that end, observe that such an $F(x)$ can be
    defined recursively over $\{\langle y,F(y)\rangle: y\in x\}$ as
    \[F(x) :=\{z|\; (\exists y) [y\in x \wedge z\in F(y)]\; \wedge\;
    (\forall y',z')[y'\in x \wedge z'\in F(y') \rightarrow z'\not\in
    z]\}.\]
    %\[G(x,s) :=\underset{\langle y,z\rangle \in s}{R\text{-min}}\; z.\]

    Thus, we define $G(x,s)$ to be
    \[G(x,s) :=\{z|\;\; (\exists y,Z)(\langle y,Z\rangle \in s \wedge z\in
    Z)\; \wedge\; [(\forall\; \langle y',Z'\rangle \in s)(\forall z'\in
    Z')\; z'\not\in z]\}.\]
    Since $G(x,s)$ is defined by a $\Delta_0$-formula, and is therefore
    recursive. Also, it is well-defined as the only free variables in the
    formula are the inputs $x$ and $s$.

    %Consider the example where $A=\text{ON}$, and $R$ functions almost like
    %a successor cardinal operator:
    %\[\beta R\alpha \Leftrightarrow \beta\leq\alpha^+.\]
    %Then $R$ is set-like on ON because
    %\[\text{pred}_{R,\text{ON}}(\alpha) =\{\beta: \beta\leq\alpha^+\}
    %=\alpha^++1\in\text{ON}.\]
    %However $R$ is not not well-founded on $A$ since every ordinal has an
    %ordinal larger than it. \\

    %We define $G(\alpha,s)$ in a way that if the desired recursive function
    %$F(\alpha) =G(\alpha, F\restriction(\alpha\downarrow))$ exists, then it
    %would be computing the $R$-transitive closure of the input ordinal.
    %Intuitively, such $F$ cannot be defined on some large input ordinal
    %$\alpha$, because to compute $F(\alpha)$ we would need to keep
    %accessing cardinals that are larger than 

    %To
    %that end, recall that the usual recursive method of defining an
    %$R$-transitive-closure is
    %\[\text{trcl}_R(x) :=x \cup \bigcup_{yRx} \text{trcl}_R(y).\]

    %Thus we define our $G$ function as 
    %\[G(\alpha,s) :=\alpha \cup \bigcup_{\langle \beta,\gamma\rangle \in s}
    %\gamma.\]
  \end{proof}
\end{document}
