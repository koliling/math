\documentclass{article}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}
\usepackage{amsmath,amssymb,amsthm,tikz,mathtools}
\usepackage{stmaryrd} % For double square bracket [[]]
\usepackage{color}
\usepackage[inline]{enumitem}
\usetikzlibrary{patterns}
\setlength{\parindent}{0mm}
\newcommand{\TODO}[1]{\textcolor{red}{TODO: #1}}

\begin{document}
\title{Basic Logic II: Homework 5}
\author{Li Ling Ko\\ lko@nd.edu}
\date{\today}
\maketitle

\begin{enumerate}[label={\bf Q\arabic*:}]
  \item \it Work in Cantor Space. Construct an open class which is not
    closed. Then a $\prod_2^0$ class which is not open or closed. You might
    want to use compactness.

    \begin{proof}
      Consider the class
      \[\mathcal{C} :=2^\omega-\{0\},\]
      which is the class of all functions from $\omega$ to $\{0,1\}$ minus
      the zero function. This class is open because it is the union of the
      basic clopen classes generated by initial segments with at least one
      value that is 1, i.e.
      \[\mathcal{C} =\llbracket\{\sigma\in2^{<\omega}: \exists n\;
      \sigma(n)=1\}\rrbracket.\]

      However, this class is not closed because its complement is the zero
      function, which cannot be open because any initial segment of the
      zero function will generate a clopen class that includes a nonzero
      function. \\

      Now consider the class of functions $f\in2^\omega$ where
      $|f^{-1}(0)|=\infty$, i.e.
      \[\mathcal{D} :=\{f\in2^\omega: |f^{-1}(0)|=\infty\}.\]

      This class is not open because the clopen class generated by any
      initial segment in $2^\omega$ will always include a function with
      only a finite number of elements mapping to 0.  Similarly, this class
      is not closed because its complement cannot be open - the clopen
      class generated by any initial segment in $2^\omega$ will always
      include a function with an infinite number of elements mapping to 0.
      Finally, this class is $\prod_2^0$ because it can be defined by a
      $\prod_2^0$ sentence as follows:
      \[\mathcal{D} =\{f\in2^\omega:\; \forall n\exists m\; (m>n \wedge
      f(m)=0)\}.\]
    \end{proof}

  \item \it Show that there is no partial computable function $f$ such that
    if $\varphi_e$ is the characteristic function of a finite set $F$ then
    $f(e)=y$ where $F=D_y$.

    \begin{proof}
      Assume such a partial computable function $f$ exists. By the SMN
      theorem, there is a total recursive function $g(e)$ such that
      \begin{align*}
        \varphi_{g(e)}(s) :=
        \begin{cases}
          0, &\text{if}\; \varphi_{e}(e)\; \text{has not halted after}\;
            s\; \text{steps}\\
          1, &\text{otherwise}.
        \end{cases}
      \end{align*}

      Then if $e\in K$ halts, $\varphi_{g(e)}$ will be the characteristic
      function of the finite set $\{1\}$, otherwise $\varphi_{g(e)}$ will
      be the characteristic function of the empty set. Thus $e\in K$ if and
      only if $f(g(e))$ is the index corresponding to the finite set
      $\{1\}$, which contradicts the incomputability of $K$.
    \end{proof}

  \item \it Soare 3.6.9: (Iterated Limit Lemma) Prove that if $n\geq1$,
    then $f\leq_T\emptyset^{(n)}$ iff there is a computable function
    $\hat{f}$ of $(n+1)$ variables such that
    \[f(x) =\lim_{y_1} \lim_{y_2} \ldots \lim_{y_n}\;
    \hat{f}(x,y_1,\ldots,y_n).\]

    \begin{proof}
      We prove by induction on $n$. The base case for $n=1$ is the limit
      lemma (Lemma 3.6.2). For the inductive step $(n+1)$, we first show
      that $\emptyset^{(n+1)}$ has the required form. From induction
      hypothesis, there is a computable function $\hat{g}$ such that
      \[\emptyset^{(n)}(e) =\lim_{y_1} \lim_{y_2} \ldots \lim_{y_{n}}\;
      \hat{g}(e,y_1,\ldots,y_n).\]
      Here we are considering $\emptyset^{(n)}(e)$ as its characteristic
      function $\chi_{\emptyset^{(n)}}(e)$. Consider the computable
      function
      \begin{align*}
        \hat{f}(e,y_1,\ldots,y_{n+1}) :=
        \begin{cases}
          1 &\text{if}\; \Phi_e^{\bar{g}(y_1,\ldots,y_n)}(e)\; \text{halts
            after}\; y_{n+1}\; \text{steps},\\
          0 &\text{otherwise},
        \end{cases}
      \end{align*}
      where $\bar{g}(y_1,\ldots,y_n)(x)$ denotes
      $\hat{g}(x,y_1,\ldots,y_n)$. Note that $\hat{f}$ is total computable
      since $\hat{g}$ is. We show that $\hat{f}$ gives $\emptyset^{(n+1)}$
      the required form. \\

      First, observe that since $\lim_{y_n}
      \hat{g}(x,y_1,\ldots,y_n)$ exists for arbitrary
      $x,y_1,\ldots,y_{n-1}\in\omega$, therefore
      \begin{align*}
        \lim_{y_n} \hat{f}(e,y_1,\ldots,y_{n+1}) =
        \begin{cases}
          1 &\text{if}\; \Phi_e^{\lim_{y_n} \bar{g}(y_1,\ldots,y_n)} (e)\;
            \text{halts after}\; y_{n+1}\; \text{steps},\\
          0 &\text{otherwise},
        \end{cases}
      \end{align*}
      because the left hand side equals $\hat{f}(e,y_1,\ldots,y_{n-1},m)$
      for some large enough $m\in\omega$, and similarly the right hand
      side equals 1 if $\Phi_{e,y_{n+1}}^{\lim_{y_n}
      \bar{g}(y_1,\ldots,y_{n-1},m)}(e)\downarrow$ and 0 otherwise, which
      is the same as $\hat{f}(e,y_1,\ldots,y_{n-1},m)$. Repeating the
      argument, by induction on $n$, we get
      \begin{align*}
        \lim_{y_1}\ldots\lim_{y_n} \hat{f}(e,y_1,\ldots,y_{n+1}) &=
        \begin{cases}
          1 &\text{if}\; \Phi_e^{\lim_{y_1}\ldots\lim_{y_n}
            \bar{g}(y_1,\ldots,y_n)} (e)\; \text{halts after}\; y_{n+1}\;
            \text{steps},\\
          0 &\text{otherwise}.
        \end{cases}\\
        &=
        \begin{cases}
          1 &\text{if}\; \Phi_e^{\emptyset^{(n)}} (e)\; \text{halts
            after}\; y_{n+1}\; \text{steps},\\
          0 &\text{otherwise}.
        \end{cases}\\
      \end{align*}

      Then
      \[e\in\emptyset^{(n+1)} \Leftrightarrow
      \lim_{y_{n+1}}\lim_{y_1}\ldots\lim_{y_n}
      \hat{f}(e,y_1,\ldots,y_{n+1}) =1,\]
      so $\emptyset^{(n+1)}$ has the required form. Thus if
      $h\leq_T\emptyset^{(n+1)}$, then there exists some $e\in\omega$ such
      that
      \begin{align*}
        h(x) &=\Phi_e^{\emptyset^{(n+1)}}(x)\\
        &=\Phi_e^{\lim_{y_{n+1}}\lim_{y_1}\ldots\lim_{y_n}
          \bar{f}(y_1,\ldots,y_{n+1})}(x),\\
      \end{align*}
      where $\bar{f}(y_1,\ldots,y_{n+1})(t)$ denotes
      $\hat{f}(t,y_1,\ldots,y_{n+1})$. Then repeating the earlier argument,
      we can shift the limits out repeatedly to get
      \begin{align*}
        h(x) &=\Phi_e^{\lim_{y_{n+1}}\lim_{y_1}\ldots\lim_{y_n}
          \bar{f}(y_1,\ldots,y_{n+1})}(x)\\
        &=\lim_{y_{n}}\lim_{y_1}\ldots\lim_{y_{n+1}}
          \Phi_e^{\bar{f}(y_1,\ldots,y_{n+1})}(x),\\
      \end{align*}
      which makes $h(x)$ in the required form. \\

      For the converse, assume
      \[h(x) =\lim_{y_{1}}\ldots\lim_{y_{n+1}}
      \hat{h}(x,y_1,\ldots,y_{n+1})\]
      for some recursive $\hat{h}$. Then
      \begin{align*}
        h(x) &=\lim_{y_1} \left(\lim_{y_{1}}\ldots\lim_{y_{n+1}}
          \hat{h}(x,y_1,\ldots,y_{n+1}) \right)\\
        &=\lim_{y_1} \left(\Phi_e^{\emptyset^{(n)}}(x,y_1) \right)\;
          \text{for some}\; e\in\omega &(\text{by induction
          hypothesis}).\\
      \end{align*}

      Now by relativized SMN theorem, there is a total recursive function
      $g(e,x,y)$ such that
      \begin{align*}
        \Phi^{\emptyset^{(n)}}_{g(x,y)}(z) :=
        \begin{cases}
          0 &\text{if}\; \exists z>y\;
            \Phi_e^{\emptyset^{(n)}}(x,z)\downarrow\neq
            \Phi_e^{\emptyset^{(n)}}(x,y),\\
          \uparrow &\text{otherwise}.\\
        \end{cases}
      \end{align*}

      Observe that $\Phi^{\emptyset^{(n)}}_{g(x,y)}$ is the zero function
      if and only if $y$ is smaller than the least modulus of
      $\Phi_e^{\emptyset^{(n)}}(x,y_1)$ at $x$, seen as a function of
      $y_1$. Otherwise, $\Phi^{\emptyset^{(n)}}_{g(x,y)}$ is the function
      that never halts at any input. Therefore
      \[g(x,y) \in\emptyset^{(n+1)} \Rightarrow
      \Phi^{\emptyset^{(n)}}_{e}(x,y) =\lim_{y_1}
      \Phi^{\emptyset^{(n)}}_{e}(x,y_1).\]

      Hence
      \[h(x) =\Phi^{\emptyset^{(n)}}_{e}(x,y),\]
      where
      \[y =\mu y\; g(x,y)\in\emptyset^{(n+1)},\]
      and so
      \[h(x) \leq_T \emptyset^{(n+1)}.\]
    \end{proof}

  \item \it Soare 3.8.10: Let $f$ be a one-to-one computable function with
    range $A$. Define the deficiency set for this enumeration $f$ to be:
    \[D= \{s: (\exists t>s)\; \left[f(t)<f(s)\right]\}.\]
    Prove that $A\leq_TD$ and $D\leq_{tt}A$.

    \begin{proof}
      We first show that because $f$ is one-to-one,
      $|\overline{D}|=\infty$. Assume by contradiction that $\overline{D}$
      contains a largest element $x_0\in\omega$. Then $f(x_0+1)>f(x_0)$
      since $x_0\in\overline{D}$. But $x_0+1\in D$, so there must be some
      $x>x_0+1$ such that $f(x_0)<f(x)<f(x_0+1)$. Now since $f$ is
      one-to-one, and there are only a finite number of elements between
      $f(x_0)$ and $f(x_0+1)$, therefore there can only be a finite number
      of distinct elements $a_n>\ldots>a_1>x_0+1$ such that
      $f(x_0)<f(a_i)<f(x_0+1)$. Then we have $a_n\in D$, yet there is no
      $x>a_n$ such that $f(x)<f(a_n)$, because $f(x)>f(x_0+1)>f(a_n)$ for
      all $x>a_n$. This is a contradiction, hence $|\overline{D}|=\infty$.
      \\

      Assume we know $D$ and want to decide if a given $y\in\omega$ lies in
      $A$. Since we know $D$, we can find the smallest $x_0\in\omega$ such
      that $x_0\not\in D$ and $f(x_0)\geq y$. Such $x_0$ must exist because
      $|\overline{D}|=\infty$ and $f$ is one-to-one. Then we know that
      $y\in A$ if and only if $f(x)=y$ for some $x\leq x_0$. Thus $A\leq_T
      D$.\\

      Assume we know $A$ and want to decide if a given $x\in\omega$ lies in
      $D$. Since $f$ is one-to-one, we know that $x\in D$ if and only if
      there is an element smaller than $f(x)$ that lies $A$ but which has
      not yet been enumerated, i.e.
      \[x\in D \Leftrightarrow A\restriction f(x) \not\subseteq
      \{f(0),\ldots,f(x-1)\},\]
      where $A\restriction k$ denotes $A\cap\{0,\ldots,k-1\}$. \\

      Consider the Turing functional $\Phi_e(x)$ such that given arbitrary
      $X\in2^\omega$ and $x\in\omega$, first computes the set
      $\{a<f(x): X(a)=1\}$, and then the set $\{f(0),\ldots,f(x-1)\}$, and
      returns 1 if the first set is not contained in the second, and
      returns 0 otherwise. Then $\Phi_e$ is total because $f$ is total
      recursive. Also, $D=\Phi_e^A$. Thus from the Truth-table theorem
      (Nerode, Theorem 3.8.5), $D\leq_{tt}A$.
    \end{proof}

  \item \it Soare 3.8.16: Show that for each $n$ there is an $(n+1)$-c.e.
    set which is not $n$-c.e. Hence, the d.c.e. sets are not closed under
    union. \\

    Hint. Fix $n$. First specify a method to effectively list all $n$-c.e.
    sets $\{Z_e^n\}_{e\in\omega}$. Next, treat this as a game in which
    Player 1 can insert or delete an element $x_e$ from his $(n+1)$-c.e.
    set $D$ in order to arrange that $D(x_e)\neq Z_e^n(x_e)$. The
    $D$-player has one more move for $x_e$ than the $Z_e^n$-player does.
    Hence, this closely resembles and generalizes Theorem 1.6.5 that $K$ is
    not computable because as a 1-c.e. set $K$ has one more move than any
    computable function $\varphi_e$.

    \begin{proof}
      We follow the hint and first find an effective list of all $n$-c.e.
      sets. We have shown that the $n$-c.e. sets are characterized by
      differences and unions of $n$ c.e. sets (\ref{q:ce}). Therefore,
      an effective enumeration of $\omega^n$ would effectively list the
      $n$-tuples of the indices of the c.e. sets involved in constructing
      each the $n$-c.e. sets. For example, we can associate with an arbitrary
      $(2k+1)$-tuple $e:=\langle e_0,\ldots,e_{2k+1}\rangle\in
      \omega^{2k+1}$ the $(2k+1)$-c.e. set
      \[Z_{e}^{2k+1} :=W_{2k+1} \cup \bigcup_{i=0}^k (W_{e_i}-W_{e_{i+1}}).\]
      Similarly, we can associate with an arbitrary
      $(2k)$-tuple $e:=\langle e_0,\ldots,e_{2k}\rangle\in
      \omega^{2k}$ the $(2k)$-c.e. set
      \[Z_{e}^{2k} :=\bigcup_{i=0}^k (W_{e_i}-W_{e_{i+1}}).\]

      Furthermore, given $e:=\langle e_0,\ldots,e_{n}\rangle\in
      \omega^{n}$, we can effectively find the computable sequence
      $A_{e,s}^n(x)$ that witnesses the $n$-c.e.-ness of $Z_e^n$, as
      follows: For each $i\in\{0,\ldots,\lfloor n/2\rfloor\}$, construct
      the computable sequence $d_{i,s}(x)$ that witnesses the d.c.e.-ness
      of $W_{e_i}-W_{e_{i+1}}$, as follows:
      \begin{align*}
        d_{i,s}(x) :=
        \begin{cases}
          0 &\text{if}\; s=0\\
          0 &\text{if}\; s>0\; \text{and}\; \varphi_{e_{i+1}}(x)\downarrow\;
            \text{after}\; s\; \text{steps},\\
          1 &\text{if}\; s>0\; \text{and}\; \varphi_{e_{i+1}}(x)\uparrow\;
            \text{after}\; s\; \text{steps and}\; \varphi_{e_i}(x)\downarrow\;
            \text{after}\; s\; \text{steps}.\\
        \end{cases}
      \end{align*}

      Then if $n$ is odd, construct the computable sequence $c_s(x)$ that
      witnesses the 1-c.e.-ness of $W_{e_n}$, i.e. let
      \begin{align*}
        c_{s}(x) :=
        \begin{cases}
          0 &\text{if}\; s=0,\\
          1 &\text{if}\; s>0\; \text{and}\; \varphi_{e_n}(x)\downarrow\;
            \text{after}\; s\; \text{steps},\\
          0 &\text{otherwise}.\\
        \end{cases}
      \end{align*}

      Finally, we can construct the computable sequence
      $A_{e,s}^n(x)$ that witnesses the $n$-c.e.-ness of $Z_e^n$, as
      \begin{align*}
        A_{e,s}^n(x) :=
        \begin{cases}
          c_s(x) \vee \bigvee_{i=0}^{\lfloor n/2\rfloor} d_{i,s}(x)
            &\text{if}\; n\; \text{is odd},\\
          \bigvee_{i=0}^{\lfloor n/2\rfloor} d_{i,s}(x)
            &\text{if}\; n\; \text{is even}.\\
        \end{cases}
      \end{align*}

      Hence, we have an effective enumeration of all the $n$-c.e. sets
      $\{Z_e^n\}_{e\in\omega}$, and also an effective enumeration of their
      corresponding computable sequences $\{A_{e,s}^n\}_{e\in\omega}$ that
      witness their $n$-c.e.-ness. Following the hint, we apply a
      diagonalization argument to construct a $(n+1)$-c.e. set which is
      not $n$-c.e. Using the enumeration $\{A_{e,s}^n\}_{e\in\omega}$, we
      construct a recursive sequence $D_s(x)$ that witness the
      $(n+1)$-c.e.-ness of a set $B$, such that $D(e)\neq Z^n_e(e)$ for each
      $e\in\omega$:
      \begin{align*}
        D_s(e) :=
        \begin{cases}
          0 &\text{if}\; s=0,\\
          0 &\text{if}\; s>0\; \text{and}\; A_{e,s}(e)=1,\\
          1 &\text{if}\; s>0\; \text{and}\; A_{e,s}(e)=0.\\
        \end{cases}
      \end{align*}

      Then $D=\lim_sD_s$ is $(n+1)$-c.e. because each $Z_e^n$ is $n$-c.e.
      Also, from construction, $D(e)\neq Z_e^n(e)$ for any $e\in\omega$.
    \end{proof}

  \item \it Soare 4.1.12:
    \begin{proof}
    \end{proof}

  \item \it Soare 4.1.13:
    \begin{proof}
    \end{proof}

  \item \it Soare 8.7.7:
    \begin{proof}
    \end{proof}

  \item \it Soare 8.7.8:
    \begin{proof}
    \end{proof}

  \item \label{q:ce} \it Soare 3.8.12 (Not assigned but was used to solve
    Soare 3.8.16):
    \begin{enumerate}[label={(\roman*)}]
      \item \it Show that $A$ is $(2n+1)$-c.e. iff $A$ is the union of $n$
        d.c.e. sets and a c.e. set.
      \item \it Show that $A$ is $(2n+2)$-c.e. iff $A$ is the union of $n+1$
        d.c.e. sets.
    \end{enumerate}

    \begin{proof}
      We prove by induction on $n$. We begin with the first base case
      $n=1$. Let $A=\lim_s A_s$ be a 1-c.e. set, with $A_s$ being a
      computable sequence witnessing the 1-c.e.-ness of $A$. Then $A=W_e$,
      where $\varphi_e$ is the partial computable function
      \begin{align*}
        \varphi_e(x) :=
        \begin{cases}
          1 &\text{if}\; 1\in\{A_s(x):s\in\omega\}\\
          \uparrow &\text{otherwise}.\\
        \end{cases}
      \end{align*}
      Conversely, if $A=W_e$ for some $e\in\omega$, then the following
      computable sequence $A_s$ will witness the 1-c.e.-ness of $A$:
      \begin{align*}
        A_s(x) :=
        \begin{cases}
          0 &\text{if}\; s=0\\
          1 &\text{if}\; s>0\; \text{and}\; \varphi_e(x)\downarrow\;
          \text{after}\; s\; \text{steps}.\\
        \end{cases}
      \end{align*}

      Next, we prove the second base case $n=2$. Let $A=\lim_s A_s$ be a
      2-c.e. set, with $A_s$ being a computable sequence witnessing the
      2-c.e.-ness of $A$. Then $A=W_e-W_f$, where $\varphi_e$ and
      $\varphi_f$ are the partial computable functions
      \begin{align*}
        \varphi_e(x) &:=
        \begin{cases}
          1 &\text{if}\; 1\in\{A_s(x):s\in\omega\}\\
          \uparrow &\text{otherwise},\\
        \end{cases}\\
        \varphi_f(x) &:=
        \begin{cases}
          1 &\text{if}\; \exists s<t\; \left[A_s(x)=1\wedge
            A_t(x)=0\right]\\
          \uparrow &\text{otherwise}.\\
        \end{cases}\\
      \end{align*}

      Conversely, if $A=W_e-W_f$ for some $e,f\in\omega$, then the
      following computable sequence $A_s$ will witness the 2-c.e.-ness of
      $A$:
      \begin{align*}
        A_s(x) :=
        \begin{cases}
          0 &\text{if}\; s=0\\
          0 &\text{if}\; s>0\; \text{and}\; \varphi_f(x)\downarrow\;
            \text{after}\; s\; \text{steps},\\
          1 &\text{if}\; s>0\; \text{and}\; \varphi_f(x)\uparrow\;
            \text{after}\; s\; \text{steps and}\; \varphi_e(x)\downarrow\;
            \text{after}\; s\; \text{steps}.\\
        \end{cases}
      \end{align*}

      Now consider the $k+2$ inductive step. Let $A=B\cup C$ be the union
      of sets $B$ and $C$, where $C$ is d.c.e., and where $B$ is a union of
      $k/2$ d.c.e. sets if $k$ is even, and otherwise a union of $(k-1)/2$
      d.c.e. sets with a c.e. set if $k$ is odd. By induction hypothesis,
      $B$ is $k$-c.e. and $C$ is 2-c.e. Let $B_s$ and $C_s$ be recursive
      functions witnessing the $k$-c.e.-ness of $B$ and the 2-c.e.-ness of
      $C$ respectively. Define the recursive sequence $A_s(x) :=(B_s(x)\vee
      C_s(x))$. Then since $A$ is the union of $B$ and $C$, we have
      $A=\lim_s A_s$, and $A_s$ witnesses the $(k+2)$-c.e.-ness of $A$. \\

      For the converse, let $A$ be $(k+2)$-c.e. with recursive sequence
      $A_s$ as witness. We ``split'' $A_s$ into a union of a $k$-c.e.
      set $B$ and a 2-c.e. set $B$, such that $A_s(x)=(B_s(x)\vee C_s(x))$,
      $B=\lim_sB_s$, and $C=\lim_sC_s$, by defining the recursive sequences
      $B_s$ and $C_s$ recursively as follows:
      \begin{align*}
        B_s(x) &:=
        \begin{cases}
          A_s(x) &\text{if}\; s=0\; \text{or}\;
            \{A_0(x),\ldots,A_{s-1}(x)\}\; \text{changes less than}\; k\;
            \text{times},\\
          B_{s-1}(x) &\text{otherwise},\\
        \end{cases}\\
        C_s(x) &:=
        \begin{cases}
          A_s(x) &\text{if}\; s=0\; \text{or}\;
            \{A_0(x),\ldots,A_{s-1}(x)\}\; \text{changes more than}\; k\;
            \text{times},\\
          0 &\text{otherwise}.\\
        \end{cases}\\
      \end{align*}

      Note that $B$ will be $k$-c.e. by construction, and $C$ will be
      2-c.e. because $A$ is $(2n+2)$-c.e. Now by induction hypothesis, $C$
      is d.c.e., and $B$ is a union of $k/2$ d.c.e. sets if $k$ is even and
      a union of $(k-1)/2$ d.c.e. sets with a c.e. set if $k$ is odd.
      Therefore $A$ is a union of $k/2+1$ d.c.e. sets if $k$ is even and
      a union of $(k+1)/2$ d.c.e. sets with a c.e. set if $k$ is odd.
    \end{proof}
\end{enumerate}
\end{document}
