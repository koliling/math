\documentclass{article}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}
\usepackage{amsmath,amssymb,amsthm,tikz,mathtools}
\usepackage{color}
\usepackage[inline]{enumitem}
\usetikzlibrary{patterns}
\setlength{\parindent}{0mm}
\newcommand{\TODO}[1]{\textcolor{red}{TODO: #1}}

\begin{document}
\title{Basic Logic I: Final Exam}
\author{Li Ling Ko\\ lko@nd.edu}
\date{\today}
\maketitle

\begin{enumerate}[label={\bf Q\arabic*:}]
  \item \it (See Section 3 for notations and definitions). Let
    $\mathcal{L}$ be a countable language and $T$ an $\mathcal{L}$-theory.

    \begin{enumerate}[label={\bf(\arabic*)}]
      \item Assume $T$ is model-complete, and let $\mathcal{M}$ be a model
        of $T$. Show that $T\cup\text{Diag}(\mathcal{M})\models
        T_\mathcal{M}$. (Notice that both $\text{Diag}(\mathcal{M})$ and
        $T_\mathcal{M}$ are $\mathcal{L}(\mathcal{M})$-theories.)

        \begin{proof}
          Let $\varphi(\bar{m})$ be an arbitrary formula in
          $T_\mathcal{M}$, where $\bar{m}\in M$. We wish to show that
          \[T\cup\text{Diag}(\mathcal{M})\vdash \varphi(\bar{m}).\]

          By model-completeness of $T$, there is a quantifier-free formula
          $\theta(\bar{x},\bar{y})$ such that
          \[T\models \forall\bar{x}\; (\varphi(\bar{x})\leftrightarrow
            \exists\bar{y}\; \theta(\bar{x},\bar{y})).\]

          Thus since $\mathcal{M}\models\varphi(\bar{m})$, we must have
          $\theta(\bar{m},\bar{a})$ for some $\bar{a}\in M$, which means
          $\theta(\bar{m},\bar{a})\in\text{Diag}(\mathcal{M})$. Thus we
          have
          \begin{align*}
            T\cup\text{Diag}(\mathcal{M}) &\models \forall\bar{x}\;
              (\varphi(\bar{x})\leftrightarrow \exists\bar{y}\;
              \theta(\bar{x},\bar{y}))\; \wedge\; \theta(\bar{m},\bar{a})
              \\
              &\models \varphi(\bar{m}). \\
          \end{align*}

          Since $\varphi(\bar{m})\in T_\mathcal{M}$ was arbitrary, we have
          $T\cup\text{Diag}(\mathcal{M})\models T_\mathcal{M}$.
        \end{proof}

      \item Prove that $T$ is model-complete if and only if for every model
        $\mathcal{M}$ of $T$ the $\mathcal{L}(\mathcal{M})$-theory
        $\text{Diag}(\mathcal{M})\cup T$ is complete.

        \begin{proof}
          $\Rightarrow$: Follows directly from part 1 above, since
          $T_\mathcal{M}$ is a complete theory in the language of
          $\mathcal{L}(\mathcal{M})$. \\

          $\Leftarrow$: Assume $\mathcal{L}(\mathcal{M})$-theory
          $\text{Diag}(\mathcal{M})\cup T$ is complete for every model
          $\mathcal{M}$ of $T$. To show that $T$ is model-complete is
          equivalent to showing that every model of $T$ is ec-closed in
          $T_\forall$ (Theorem 11.14.3). Now the models of $T_\forall$ are
          exactly the substructures of the models of $T$ (Lemma 11.2).
          Also, if every model of $T$ is ec-closed in $T$, then given
          models $\mathcal{M},\mathcal{N}\models T$ such that
          $\mathcal{M}<\mathcal{N}_0<\mathcal{N}$, we will have
          $\mathcal{M}<\mathcal{N}$ is ec-closed and thus
          $\mathcal{M}<\mathcal{N}_0$ is ec-closed. Therefore it suffices
          to show that models of $T$ are ec-closed in $T$. \\

          Let $\mathcal{M},\mathcal{N}\models T$ with
          $\mathcal{M}<\mathcal{N}$. Assume by contradiction that
          $\mathcal{M}$ is not ec-closed in $\mathcal{N}$. Then there is a
          quantifier-free formula $\varphi(\bar{x},\bar{y})$ such that
          $\mathcal{N}\models\exists\bar{x}\; \varphi(\bar{x},\bar{m})$ for
          some $\bar{m}\in M$ but $\mathcal{M}\not\models\exists\bar{x}\;
          \varphi(\bar{x},\bar{m})$. Then we have

          \[\begin{array}{lrlr}
            &\mathcal{M} &\models\forall\bar{x}\;
              \neg\varphi(\bar{x},\bar{m}) \\
            \Rightarrow &T_\mathcal{M} &\models\forall\bar{x}\;
              \neg\varphi(\bar{x},\bar{m}) \\
            \Rightarrow &\text{Diag}(\mathcal{M})\cup T
              &\models\forall\bar{x}\; \neg\varphi(\bar{x},\bar{m})
              &(\because\text{Diag}(\mathcal{M})\cup T\models
              T_\mathcal{M}\; \text{by completeness assumption}) \\
            \Rightarrow &\text{Diag}(\mathcal{N})\cup T
              &\models\forall\bar{x}\; \neg\varphi(\bar{x},\bar{m})
              &(\because\text{Diag}(\mathcal{M})\subseteq
              \text{Diag}(\mathcal{N})\; \text{from}\;
              \mathcal{M}<\mathcal{N}) \\
            \Rightarrow &\mathcal{N} &\models\forall\bar{x}\;
              \neg\varphi(\bar{x},\bar{m}) \\
            \Rightarrow &\mathcal{N} &\not\models\exists\bar{x}\;
              \varphi(\bar{x},\bar{m}), \\
          \end{array}\]
          a contradiction.
        \end{proof}
    \end{enumerate}

  \item \it Let $\varphi$ be a sentence in the language of abelian groups.
    As usual for a prime $p$ we denote by $\mathbb{Z}_p$ the additive group
    $\mathbb{Z}/p\mathbb{Z}$.

    \begin{enumerate}[label={\bf(\arabic*)}]
      \item Show that if $\mathbb{Q}\models\varphi$ then there is a prime
        $p$ such that $\mathbb{Z}_p\models\varphi$. (Hint: $(\mathbb{Q},+)$
        is a torsion-free divisible abelian group.)

        \begin{proof}
          The language of abelian groups is $\mathcal{L}=\{+,-,0\}$.
          Also, the theory of abelian groups $T_\text{Ab}$ can be
          considered a conjunction of a finite set of $\forall$-sentences.
          Then the theory of torsion-free divisible abelian groups
          $T_\text{tor-free}$ is $T_\text{Ab}\cup T_0 \cup T_1$, where
          \begin{align*}
            T_0 &:= \bigcup_{n\in\omega}
              \{\underbrace{x+\ldots+x}_{n\text{-times}}=0 \rightarrow
              x=0\}, \\
            T_1 &:= \bigcup_{n\in\omega}
              \{\forall x\exists y\;
              \underbrace{y+\ldots+y}_{n\text{-times}}=x\}. \\
          \end{align*}

          Now $T_\text{tor-free}$ is $\kappa$-categorical for all
          $\kappa>\omega$ (Theorem 4.35), so since $T_0$ ensures that there
          are no finite-models, $T_\text{tor-free}$ is a complete theory by
          Vaught's test (Theorem 4.34). \\

          Let $\varphi$ be a sentence in the language such that
          $\mathbb{Q}\models\varphi$. Then
          $T_\text{tor-free}\models\varphi$ from completeness of
          $T_\text{tor-free}$, thus from compactness theorem, there must be
          a finite subset of formulas $T_\text{fin}\subset
          T_\text{tor-free}$ such that $T_\text{fin}\models\varphi$.
          Without loss of generality, we can assume
          \begin{align*}
            T_\text{fin} &= T_\text{Ab}\cup \bigcup_{n=1}^N
              \{\underbrace{x+\ldots+x}_{n\text{-times}}=0 \rightarrow
              x=0\} \cup\bigcup_{n=1}^N
              \{\forall x\exists y\;
              \underbrace{y+\ldots+y}_{n\text{-times}}=x\}. \\
          \end{align*}
          Then by choosing prime $p>N$, we will have $\mathbb{Z}_p\models
          T_\text{fin}$. Then $\mathbb{Z}_p\models\varphi$, as required.
        \end{proof}

      \item Write a sentence $\psi$ such that $\mathbb{Z}\models\psi$ and
        $\mathbb{Q}\models\neg\psi$.
        \begin{proof}
          Let $\psi$ be the sentence that says ``There is an element that
          is not divisible by 2''. Formally,
          \[\psi:= \exists x\forall y\; (y+y\neq x).\]
        \end{proof}
    \end{enumerate}

  \item \it Let $\varphi$ be an $\forall\exists$-sentence in the language
    of rings. Assume $\varphi$ holds in every finite field. Prove that
    $\varphi$ holds in every algebraically-closed field.

    \begin{proof}
      If $\varphi$ holds in every algebraically-closed field of non-zero
      characteristic, then it will also hold in every algebraically-closed
      field of characteristic 0 (Corollary 4.42). Thus it suffices to prove
      that $\varphi$ holds in the former. Also, for an arbitrary prime $p$,
      if $\varphi$ holds in one algebraically-closed field of
      characteristic $p$, then $\varphi$ will also hold in all
      algebraically-closed fields of characteristic $p$, because
      $\text{ACF}_p$ is $\kappa$-categorical for all $\kappa>\omega$ and
      does not have finite models from closure property, and thus is a
      complete theory from Vaught's test. Thus, it suffices to show that
      given arbitrary prime $p$, $\varphi$ holds in one model of
      $\text{ACF}_p$. \\

      In particular, we show that $\varphi$ holds in
      $\overline{\mathbb{F}}_p$, the algebraic-closure of the field
      $\mathbb{F}_p$ of $p$ elements. Now \[\overline{\mathbb{F}}_p =
      \bigcup_{n\in\mathbb{N}^+} \mathbb{F}_{p^n},\] where
      $\mathbb{F}_{p^n}$ is the unique (up to ring-isomorphism) field with
      $p^n$ elements that embeds $\mathbb{F}_{p^{n-1}}$. Since each
      $\mathbb{F}_{p^n}$ is finite, $\varphi$ holds in each
      $\mathbb{F}_{p^n}$. So we have a chain of models
      \[\mathbb{F}_{p^1}< \mathbb{F}_{p^2}< \ldots\] of the
      $\forall\exists$-theory $\{\varphi\}$. Then from inductiveness of
      $\{\varphi\}$ (Corollary 11.8), the union $\overline{\mathbb{F}}_p$
      will also be a model of $\{\varphi\}$, thus
      $\overline{\mathbb{F}}_p\models\varphi$, as we wished to show.
    \end{proof}

  \item \it Let $\mathcal{L}$ be a language. Assume $\mathcal{L}$ has a
    binary predicate symbol $P(x,y)$. Let $T$ be a universal
    $\mathcal{L}$-theory such that $T\models\forall x\exists y\; P(x,y)$.
    Prove that there exists $\mathcal{L}$-terms $t_1(x),\ldots,t_n(x)$ such
    that \[T\models\forall x\; \bigvee_{m=1}^n P(x,t_m(x)).\]
    \begin{proof}
      Assume by contradiction that for any finite set of terms
      $t_1(x),\ldots,t_m(x)$ in variable $x$,
      \begin{equation}
        \tag{$*$}
        T\models\exists x\; \bigwedge_{m=1}^n \neg P(x,t_m(x).
        \label{eqn:neg}
      \end{equation}
      Then there is a model $\mathcal{M}$ of $T$ satisfying all the
      existential sentences given at equation~\eqref{eqn:neg}. Note that
      because $T\models\forall x\exists y\; P(x,y)$, every element $a\in M$
      has a witness $a'\in M$ such that $P(a,a')$. \\

      There are two possible cases for a model $\mathcal{M}$ satisfying all
      the equations in \eqref{eqn:neg}. In the first case, there is an
      element $a\in M$ whose witness $a'\in M$ of $P(a,a')$ is not any of the
      terms $t(a)$ of $a$. In this case, consider the substructure $\langle
      a\rangle<\mathcal{M}$, which is the smallest substructure of
      $\mathcal{M}$ containing $a$, defined rigorously as
      \begin{align*}
        \langle a\rangle &=\{t^\mathcal{M}(a):
          t^\mathcal{M}(x)\; \text{is an}\; \mathcal{L}\text{-term}\}. \\
      \end{align*}

      Note that $\langle a\rangle$ defined above will be closed under
      functions since the composition of terms in variable $x$ remains a
      term in variable $x$. Thus $\langle a\rangle$ is a substructure of
      $\mathcal{M}$. Then since $T$ is a universal theory, it is closed
      under substructures (Theorem 11.3), thus $\langle a\rangle$ is also a
      model of $T$. However, $a\in\langle a\rangle$ will have no witness to
      $P(a,y)$ because its witness is not $t(a)$ for any $\mathcal{L}$-term
      $t(x)$. Thus $\langle a\rangle\models\forall y\; \neg P(a,y)$,
      contradicting $T\models\forall x\exists y\; P(x,y)$. \\

      In the second case, every element $a\in M$ has a witness $a'\in M$
      for $P(a,a')$ such that $a'=t(a)$ for some $\mathcal{L}$-term $t(x)$.
      We construct an elementary extension $\mathcal{N}\succ\mathcal{M}$
      such that $\mathcal{N}$ falls under case 1 above. Add to language
      $\mathcal{L}(\mathcal{M})$ a new constant symbol $c$, i.e.
      $\mathcal{L}':=\mathcal{L}(\mathcal{M})\cup\{c\}$. In this extended
      language, consider the theory
      \[T':=T_\mathcal{M}\cup \{\neg P(c,t(c)):t^\mathcal{M}(x)\;
        \text{is an}\; \mathcal{L}\text{-term}\}.\]

      Then $T'$ is finitely satisfiable by $\mathcal{M}$: Clearly
      $\mathcal{M}$ satisfies $T_\mathcal{M}$. Given any finite set of
      $\mathcal{L}$-terms $t_1(x),\ldots,t_m(x)$ in variable $x$, because
      $\mathcal{M}$ satisfies equation~\eqref{eqn:neg}, there must be an
      element $a\in M$ that satisfies $\neg P(a,t_i(a))$ for all
      $i\in\{1,\ldots,m\}$. Assigning $c$ to this element $a$, we will have
      $\mathcal{M}\models T'$. Thus by Compactness theorem, $T'$
      has a model $\mathcal{N}$, which will also be a model of $T$ since
      $\mathcal{N}\models T_\mathcal{M}\supset T$. However in
      $\mathcal{N}$, the constant element $c$ does not have a witness $c'$
      of $P(c,c')$ which is a term $t(c)$ of $c$. Thus $\mathcal{N}$ is the
      same as case 1 above, where we defined a sub-structure that
      gives a contradiction.
    \end{proof}
\end{enumerate}
\end{document}
