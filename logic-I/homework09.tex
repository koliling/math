\documentclass{article}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}
\usepackage{amsmath,amssymb,amsthm,tikz,mathtools}
\usepackage[inline]{enumitem}
\usetikzlibrary{patterns}
\usepackage{color}
\setlength{\parindent}{2mm}
\newcommand{\TODO}[1]{\textcolor{red}{TODO: #1}}

\begin{document}
\title{Basic Logic I: Homework 9}
\author{Li Ling Ko\\ lko@nd.edu}
\date{\today}
\maketitle

\begin{enumerate}[label={\bf Q\arabic*:}]
  \item Let $A=\{a_1,\ldots,a_m\}$ be a finite subset of a structure
    $\mathcal{M}$. For $p(x_1,\ldots,x_n)\in S_n(A)$ let
    $\tilde{p}(x_1,\ldots,x_n)$ be the following set of formulas over
    $\emptyset$
    \[\tilde{p}=\{\varphi(x_1,\ldots,x_{n+m}):
    \varphi(x_1,\ldots,x_n,a_1,\ldots,a_m)\in p\}.\]
    Show that $\tilde{p}$ is a Complete type over $\emptyset$ and the
    map $p\mapsto\tilde{p}$ is an injective map from $S_n(A)$ to
    $S_{n+m}(T)$.

    \begin{proof}
      To show that $\tilde{p}$ is Complete, let
      $\varphi(x_1,\ldots,x_{n+m})$ be any formula in $(n+m)$ variables. We
      need to show that either $\varphi$ or $\neg\varphi$ is in
      $\tilde{p}$. Now since $p$ is Complete, either
      $\varphi(x_1,\ldots,x_n,a_1,\ldots,a_m)$ or
      $\neg\varphi(x_1,\ldots,x_n,a_1,\ldots,a_m)$ is in $p$, so by
      definition of $\tilde{p}$, either $\varphi$ or $\neg\varphi$ will be
      in $\tilde{p}$. \\

      To show that the map is injective, assume that $\tilde{p}=\tilde{q}$.
      Then given any formula $\varphi(x_1,\ldots,x_{n+m})$ in $(n+m)$
      variables, we have
      \begin{align*}
                        & \varphi(x_1,\ldots,x_n,a_1,\ldots,a_m) &\in p & \\
        \Leftrightarrow & \varphi(x_1,\ldots,x_{n+m}) &\in \tilde{p} & \\
        \Leftrightarrow & \varphi(x_1,\ldots,x_{n+m}) &\in \tilde{q} & \\
        \Leftrightarrow & \varphi(x_1,\ldots,x_n,a_1,\ldots,a_m) &\in q & \\
      \end{align*}
      Hence $p=q$, and the map is injective.
    \end{proof}

  \item Let $\mathcal{M}$, $\mathcal{N}$ be structures and
    $f:\mathcal{M}\rightarrow\mathcal{N}$ a partial elementary map with a
    finite domain $A=\text{dom}(f)$. If $\varphi(x)$ is a formula over $A$
    then it has form $\Psi(x,a_1,\ldots,a_m)$ for some formula
    $\Psi(x,x_1,\ldots,x_m)$ over $\emptyset$ and $a_1,\ldots,a_m \in A$,
    and we will denote by $f(\varphi)$ the formula
    $\Psi(x,f(a_1),\ldots,f(a_m))$. For a type $p(x)\in S_1(A)$ let
    $f(p)=\{f(\varphi):\varphi\in p\}$.
    \begin{enumerate}
      \item Show that $f(p)$ is a type in $\mathcal{N}$ over
        $\text{range}(f)$.

        \begin{proof}
          Let $\overline{a}$ denote $(a_1,\ldots,a_m)$. Given any finite
          set of formulas
          $\varphi_1(x,f(\overline{a})),\ldots,\varphi_n(x,f(\overline{a}))$
          in $f(p)$, we need to show that $\mathcal{N}$ realizes their
          conjunction \[\varphi(x,f(\overline{a})):=
          \varphi_1(x,f(\overline{a}))\wedge
          \ldots\wedge\varphi_n(x,f(\overline{a})),\] or equivalently,
          \[\mathcal{N}\models\exists x\; \varphi(x,f(\overline{a})).\]
          Now for each $i\in\{1,\ldots,n\}$, $\varphi_i(x,\overline{a})$ is
          a formula in $p$ by definition of $f(p)$, therefore by
          Completeness and consistency of $p$, $\varphi(x,\overline{a})$ is
          also in $p$. In other words, $\mathcal{M}$ realizes
          $\varphi(x,\overline{a})$, or equivalently,
          \[\mathcal{M}\models\exists x\; \varphi(x,\overline{a}).\]
          Therefore
          $\exists x\; \varphi(x,\overline{x})\in
          \text{tp}^\mathcal{M}(\overline{a}/\emptyset)$, which implies
          $\exists x\; \varphi(x,\overline{x})\in
          \text{tp}^\mathcal{N}(f(\overline{a})/\emptyset)$ since
          $\text{tp}^\mathcal{M}(\overline{a}/\emptyset)=
          \text{tp}^\mathcal{N}(f(\overline{a})/\emptyset)$. Hence
          $\mathcal{N}\models\exists x\; \varphi(x,f(\overline{a}))$ as
          required.
        \end{proof}

      \item Let $a$ realizes $p$ in $\mathcal{M}$ and $b$ realize $f(p)$ in
        $\mathcal{N}$. Show that $f\cup\{(a,b)\}$ is a partial elementary
        map.
        \begin{proof}
          We want to show that
          $\text{tp}^\mathcal{M}(a\overline{a}/\emptyset)
          =\text{tp}^\mathcal{N}(bf(\overline{a})/\emptyset)$, or
          equivalently, given any formula $\varphi(x,\overline{x})$ in
          $(m+1)$ variables, we have
          \[\mathcal{M}\models\varphi(a,\overline{a}))\Leftrightarrow
          \mathcal{N}\models\varphi(b,f(\overline{a})).\]
          Let $\varphi(x,\overline{x})$ be a formula in $(m+1)$ variables.
          Then
          \begin{align*}
            \mathcal{M}\models\varphi(a,\overline{a}))  & \Leftrightarrow
            \varphi(x,\overline{a})\in p(x) & (\text{by Completeness of}\;
              p(x)) \\
              & \Leftrightarrow \varphi(x,f(\overline{a}))\in f(p(x)) &
              (\text{by definition of}\; f(p)\; \text{and Completeness
              of}\; f(p)) \\
              & \Leftrightarrow \mathcal{N}\models\varphi(b,f(\overline{a}))) &
              (\text{by Completeness of}\; f(p)), \\
          \end{align*}
          as we are required to show.
        \end{proof}
    \end{enumerate}

  \item Let $T$ be the theory of vector spaces over $\mathbb{Q}$,
    $\mathcal{M}$ a model of $T$ and $A\subseteq M$. Show that
    $|S^{\mathcal{M}}_1(A)|\leq|A|+\omega$.

    \begin{proof}
      Recall from Question 1 of Homework 7 that $T$ admits quantifier
      elimination. For a given $v=q_1a_1+\ldots+q_ra_r\in\text{span}(A)$,
      let $\varphi_v(x)$ denote the formula $x=q_1a_1+\ldots+q_ra_r\in
      S^\mathcal{M}_1(A)$. Let $p\in S^\mathcal{M}_1(A)$. There are two
      cases. In the first case, $p$ contains $\varphi_v(x)$ for some
      $v\in\text{span}(A)$. Then we will have
      $p=\text{tp}^\mathcal{M}(v/A)$. \\

      In the second case, $p$ contains $\neg\varphi_v(x)$ for all
      $v\in\text{span}(A)$. We show that there can only be one such type
      $S^\mathcal{M}_1(A)$. It suffices to show that
      $S(x)=\{\neg\varphi_v(x): v\in\text{span}(A)\}$ is a complete type
      over $A$. Given any formula $\phi(x,a_1,\ldots,a_k)$ over $A$, we
      want to show that $S(x)\vdash\phi(x,a_1,\ldots,a_k)$ or
      $S(x)\vdash\neg\phi(x,a_1,\ldots,a_k)$. From quantifier elimination
      of $T$, we can assume $\phi(x,\overline{y})$ is a quantifier-free
      formula. Then decomposing $\phi(x,\overline{y})$ into disjunctive
      normal form $\phi(x,\overline{y})=
      \phi_1(x,\overline{y})\vee\ldots\vee\phi_n(x,\overline{y})$, where
      each $\phi_i(x,\overline{y})$ is a conjunction of atomic formulas in
      $A$, we note that $S(x)\vdash\phi(x,\overline{y})$ if
      $S(x)\vdash\phi_i(x,\overline{y})$ for some $i\in\{1,\ldots,n\}$,
      otherwise $S(x)\vdash\neg\phi(x,\overline{y})$.  Hence we can assume
      that $\phi(x,\overline{y})$ is a conjunction of atomic formulas in
      $A$, i.e. $\phi(x,\overline{y})=
      \theta_1(x,\overline{y})\wedge\ldots\wedge\theta_s(x,\overline{y})$,
      where each $\theta_j(x,\overline{y})$ is an atomic formula over $A$.
      Then similar to the previous argument,
      $S(x)\vdash\phi(x,\overline{y})$ if
      $S(x)\vdash\phi_i(x,\overline{y})$ for all $i\in\{1,\ldots,n\}$,
      otherwise $S(x)\vdash\neg\phi(x,\overline{y})$. Hence we can assume
      that $\phi(x,\overline{y})$ is an atomic formula.  Now in the given
      language, an atomic formula over $A$ must be equivalent to one of the
      forms $x\;\square\;q_1a_1+\ldots+q_ma_m$, where $\square$ is either
      $=$ or $\neq$, and $a_k\in A$. Thus if $\phi(x,\overline{y})$ is of
      the form $x\neq q_1a_1+\ldots+q_ma_m$, then
      $S(x)\vdash\phi(x,\overline{y})$, otherwise
      $S(x)\vdash\neg\phi(x,\overline{y})$, which concludes the claim that
      $S(x)$ is complete. \\

      Hence, the number of types in $S^\mathcal{M}_1(A)$ is
      $|\text{span}(A)|+1\leq|(|A|+\omega)^{<\omega}|+1=|A|+\omega$.
    \end{proof}

  \item Let $T$ be the theory of infinite vector spaces over $\mathbb{Q}$.
    Show that $|S_1(T)|<\omega$ but $S_2(T)$ is infinite.

    \begin{proof}
      First, note that considering $\mathbb{Q}$ as an infinite vector space
      $V_\mathbb{Q}$ over $\mathbb{Q}$ (defining $+$ and $\cdot$ the same
      way these operations are defined in $\mathbb{Q}$ as a ring),
      $V_\mathbb{Q}$ can be embedded in every model of $T$: Given any other
      infinite vector space $V$ over $\mathbb{Q}$, we can embed
      $V_\mathbb{Q}$ into $V$ by sending $0$ to $0$, $1$ to a fixed element
      $e$ of a basis of $V$ (such $e$ exists since $V$ is infinite), and
      the remaining $q\in V_\mathbb{Q}$ to $q\cdot e\in V$. It is routine
      to check that this map will preserve the axioms of vector spaces,
      which are associativity and commutativity of addition, identity
      element of addition, inverse element of addition, compatibility of
      scalar multiplication with field multiplication, identity element of
      scalar multiplication, and the distributive laws. Also, this map will
      be injective because $q\cdot e=0$ if and only if $q=0$ because $e$ is
      an element of a basis of $V$. \\

      Next, observe that $T$ is model complete from Theorem 5.3, because
      $T$ admits quantifier elimination by Question 1 of Homework 7. Then
      since $T$ has a model that can be embedded into any model of $T$, $T$
      must be complete: Given any sentence $\varphi$ in the language and
      any model $\mathcal{M}$ of $T$, $\varphi$ is satisfied by
      $\mathcal{M}$ if and only if $\varphi$ is satisfied by
      $V_\mathbb{Q}$ embedded in $\mathcal{M}$, because the embedding is
      elementary from model completeness of $T$. Hence $T$ is complete, and
      furthermore $T\models\text{Th}(V_\mathcal{Q})$. \\

      Therefore, $V_\mathbb{Q}$ is a prime model of $T$, and $S_n(T)$ is
      well-defined from completeness of $T$. Thus, from Corollary 6.17,
      $S_n(T)= S_n^{V_{\mathbb{Q}}}(\emptyset)$, so we can work within the
      model $V_\mathbb{Q}$. \\

      We first show that $S_1(T)$ has exactly 2 types - the first type
      which contains the formula ``$x=0$'', and the second type which
      contains the formula ``$\neg x=0$''. This is equivalent to showing
      that $\{x=0\}$ and $\{\neg x=0\}$ are complete. Now
      given any formula $\varphi(x)$, by quantifier elimination,
      $\varphi(x)$ is equivalent to a quantifier-free formula. Decomposing
      the quantifier-free formula into disjunctive normal form,
      $\varphi(x)$ will be equivalent to a disjunction of conjunction of
      atomic formulas in variable $x$. However, in the given language, the
      only atomic formulas are equivalent to ``$x=0$'' or its negation
      ``$\neg x=0$''. Hence, we will always have exactly one of
      $\{x=0\}\vdash\varphi(x)$ or $\{x=0\}\vdash\neg\varphi(x)$.
      Similarly, for any formula $\varphi(x)$, we will always have exactly
      one of $\{\neg x=0\}\vdash\varphi(x)$ or $\{\neg
      x=0\}\vdash\neg\varphi(x)$.  Thus, both $\{x=0\}$ and $\{\neg x=0\}$
      are complete, and $S_1(T)$ has exactly two types. \\

      %We first show that $S_1^{V_{\mathbb{Q}}}(\emptyset)$ only has 2 types -
      %$\text{tp}^{V_{\mathbb{Q}}}(0/\emptyset)$ and
      %$\text{tp}^{V_{\mathbb{Q}}}(1/\emptyset)$. These two types are
      %clearly distinct since $\text{tp}^{V_{\mathbb{Q}}}(0/\emptyset)$
      %contains the formula $x=0$ while type
      %$\text{tp}^{V_{\mathbb{Q}}}(1/\emptyset)$ does not. It remains to
      %show that given any non-zero element $q\in V_\mathbb{Q}$, we will
      %have $\text{tp}^{V_{\mathbb{Q}}}(q/\emptyset)=
      %\text{tp}^{V_{\mathbb{Q}}}(1/\emptyset)$. To prove this claim,
      %consider the map $\alpha:V_{\mathbb{Q}}\rightarrow V_{\mathbb{Q}}$,
      %that sends $a$ to $aq$. This map will send $1$ to $q$, and can be
      %verified to be automorphism of $\mathbb{Q}$-vector spaces. Since
      %isomorphic structures are elementarily equivalent, we have
      %$V_\mathbb{Q}\models\varphi(1)\Leftrightarrow
      %V_\mathbb{Q}\models\varphi(\alpha(1))$. Thus
      %$\text{tp}^{V_{\mathbb{Q}}}(q/\emptyset)=
      %\text{tp}^{V_{\mathbb{Q}}}(1/\emptyset)$, which concludes the proof
      %that $S_1(T)=S_1^{V_{\mathbb{Q}}}(\emptyset)$ has exactly 2 types. \\

      Now, we show that $S_2(T)$ is infinite. Since $S_n(T)=
      S_n^{V_{\mathbb{Q}}}(\emptyset)$ from earlier argument, it suffices
      to show that $S_2^{V_{\mathbb{Q}}}(\emptyset)$ is infinite. Consider
      the set of types \[S=\{\text{tp}^{V_\mathbb{Q}}(1,n/\emptyset):
      n\in\mathbb{N}^+\} \subseteq S_2^{V_{\mathbb{Q}}}(\emptyset).\] Each
      type in $S$ is distinct because
      $\text{tp}^{V_\mathbb{Q}}(1,n/\emptyset)$ contains the formula
      \[\varphi_n(x_1,x_2):=
      x_2=\underbrace{x_1+\ldots+x_1}_{n-\text{times}},\] which is not
      contained in any other type in $S$: If $\varphi_m(x_1,x_2)$ and
      $\varphi_n(x_1,x_2)$ are in the same type for distinct
      $m<n\in\mathbb{N}^+$, then rearranging the formula, we get
      $(n-m)\cdot x_1=0$, which can only be true in $V_\mathbb{Q}$ if
      $x_1=0$. Thus, each type in $S\subseteq
      S_2^{V_\mathbb{Q}}(\emptyset)$ is distinct, and so
      $S_2(T)=S_2^{V_\mathbb{Q}}(\emptyset)$ is infinite.
    \end{proof}
\end{enumerate}
\end{document}
